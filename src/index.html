<!DOCTYPE html>
<html lang="en-US" class="fade">
<head>
  <meta charset="UTF-8">
  <title>Offline Web Apps On GitHub Pages</title>
  <meta name="viewport" content="width=device-width, user-scalable=yes">
  <link rel="stylesheet" href="themes/mozilla/styles/style.css">
</head>
<body class="list">
  <header class="caption">
    <h1>Offline Web Apps On GitHub Pages</h1>
    <p class="footer">
      Myk Melez, <a href="mailto:myk@mykzilla.org">myk@mykzilla.org</a>
    </p>
  </header>

  <aside class="talkdescription">
    <p>
      This slide deck is using the shower system - roll over the previews to see
      the notes and click any slide to go into presentation mode. Then use keys
      to navigate. <button onclick="goFullScreen()">Go fullscreen</button>
    </p>
    <p class="abstract">
      <strong>Abstract: </strong>
      GitHub Pages is a simple web host for static assets. And Offline Web Apps
      are designed to work well on devices without persistent network connections
      (and thus no hard dependencies on dynamic server-side logic).

      Which means GitHub Pages would be a great place to host Offline Web Apps,
      if there was a way for them to ensure they'll be cached despite not having
      control over the web server configuration. Service Workers provides
      that missing piece.

      Come see how Offline Web Apps hosted on GitHub Pages can use Service Workers
      to cache themselves consistently and persistently, including automatic,
      silent, and incremental updates, with graceful degradation on browsers
      that don't support them.

      You'll learn what Service Workers are, find out how to integrate them into
      Grunt and Gulp toolchains, and see demos of Offline Web Apps on GitHub Pages
      surviving page reloads and browser restarts on disconnected devices.
    </p>
  </aside>

  <div id="cover" class="slide"><div><section>
    <header><h2>Offline Web Apps On GitHub Pages</h2></header>
    <img src="pictures/offline.jpg" class="middle" height="400" alt="OFFLINE">
    <small class="credits"><a href="https://www.flickr.com/photos/mikecogh/5110795452/">Image by Michael Coghlan</a></small>
    <small class="byline">Myk Melez, GitHub Universe 2015, San Francisco, October 2</small>
    <footer class="notes"></footer>
  </section></div></div>

<!-- end slide block -->

  <div id="repurposed" class="slide"><div>
    <section>
    <header><h2>Repurposing GitHub Pages</h2></header>
      <p>Successful technologies get repurposed.</p>
      <p>GitHub Pages is a great, simple web host for static pages.</p>
      <p>What else can we do with this?</p>
      <p>Let's overload it!</p>
    </section>
  </div></div>

  <div id="definition" class="slide"><div>
    <section>
    <header><h2>Definition</h2></header>
      <p>Offline Web Apps are apps that work when your network connection doesn't.</p>
      <p>Your browser loads them, and you can use them.</p>
      <p>Games, utilities, anything that isn't absolutely dependent on the network.</p>
      <p>Not only offline, but also on lie-fi.
    </section>
  </div></div>

  <div id="broken-cache" class="slide"><div>
    <section>
    <header><h2>Broken</h2></header>
      <p>Browsers have had caches forever, but going offline usually means losing your apps.</p>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="just-work" class="slide"><div>
    <section>
    <header><h2>Just Work</h2></header>
      <p>Native apps just work.</p>
      [picture of not broken native app]
      <p>How do we make web apps just work?</p>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="app-cache" class="slide"><div>
    <section>
    <header><h2>AppCache To The Rescue?</h2></header>
      <p>For the last few years, the primary answer has been Application Cache.</p>
      <p>"Application Cache is a douchebag." - <a href="http://alistapart.com/article/application-cache-is-a-douchebag">Jake Archibald</a></p>
      <p>Web Platform Developers started over.</p>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="service-workers" class="slide"><div>
    <section>
    <header><h2>Service Workers</h2></header>
      <p>the anti-AppCache</p>
      <p>AppCache was declarative? SW will be imperative!</p>
      <p>AppCache was specific? SW will be general!</p>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="powerful-abstraction" class="slide"><div>
    <section>
    <header><h2>Powerful Abstraction</h2></header>
      <p>like a server running on the client</p>
      <p>can intercept requests and serve them from its own local cache</p>
      <p>Let's use it to offline an app on GitHub Pages!</p>
      [diagram of service worker behavior]
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="oghliner" class="slide"><div>
    <section>
    <header><h2>Oghliner</h2></header>
      <p>Node module that stitches together some other modules</p>
      <p>provides a template for an Offline Web App</p>
      <p>you can also use it as a tool with your existing app</p>
      <p>integrate it into a Gulp-based build system</p>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="key-functions" class="slide"><div>
    <section>
    <header><h2>Three Key Functions</h2></header>
    <ol>
      <li>offline</li>
      <li>deploy</li>
      <li>configure</li>
    </ol>
    <footer class="notes"></footer>
    </section>
  </div></div>


  <div id="offline" class="slide"><div>
    <section>
      <header><h2>Offlining</h2></header>
      <pre>> oghliner offline dist/</pre>
      <pre>
        <code>gulp.task('offline', function(callback) {</code>
        <code>  oghliner.offline({</code>
        <code>    rootDir: 'dist/',</code>
        <code>    fileGlobs: ['*.html', 'css/*.css', 'js/*.js',</code>
        <code>                'images/*'],</code>
        <code>  }, callback);</code>
        <code>});</code>
      </pre>
      <footer class="notes">
        * creates offline-worker.js script in root directory
        * also need to copy offline-manager.js and load it in HTML pages
      </footer>
    </section>
  </div></div>

  <div id="offline-result" class="slide"><div>
    <section>
      <header><h2>Offlining</h2></header>
      > oghliner offline dist/<br>
      <br>
      [11:12:29] Caching static resource "dist/css/index.css" (378 B)<br>
      [11:12:29] Caching static resource "dist/index.html" (3.04 kB)<br>
      [11:12:29] Caching static resource "dist/js/index.js" (8.43 kB)<br>
      [11:12:29] Caching static resource "dist/js/offline-manager.js" (176 B)<br>
      …<br>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="deploy" class="slide"><div>
    <section>
      <header><h2>Deploying</h2></header>
      <pre>> oghliner deploy dist/</pre>
      <pre>
        <code>gulp.task('deploy', function(callback) {</code>
        <code>  oghliner.deploy({</code>
        <code>    rootDir: 'dist',</code>
        <code>  }, callback);</code>
        <code>});</code>
      </pre>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="deploy-result" class="slide"><div>
    <section>
        > oghliner deploy dist/<br>
        <br>
        [11:17:43] Cloning git@github.com:mykmelez/eggtimer.git into ../../../../usr/local/lib/node_modules/oghliner/node_modules/gh-pages/.cache<br>
        [11:17:44] Cleaning<br>
        [11:17:44] Fetching origin<br>
        [11:17:46] Checking out origin/gh-pages<br>
        [11:17:46] Removing files<br>
        [11:17:46] Copying files<br>
        [11:17:46] Adding all<br>
        [11:17:46] Committing<br>
        [11:17:46] Pushing<br>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="configure" class="slide"><div>
    <section>
    <header><h2>Configuring</h2></header>
      <pre>> oghliner configure</pre>
      [explain how this is automation of build+offline+deploy]
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="configure-result" class="slide"><div>
    <section>
        [replace with diagram explaining process]
        [show screenshot of build output of Travis]
        > oghliner configure<br>
        <br>
        Creating temporary GitHub token for getting Travis token…<br>
        Getting Travis token…<br>
        Deleting temporary GitHub token for getting Travis token…<br>
        Checking the status of your repository in Travis…<br>
        Good news, your repository is already active in Travis!<br>
        Encrypting GitHub token…<br>
        Writing encrypted GitHub token to .travis.yml file…<br>
        <br>
        You're ready to auto-deploy using Travis!  Just commit the changes<br>
        in .travis.yml and push the commit to the origin/master branch:<br>
      </pre>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="demo" class="slide shout"><div>
    <section>
      [show Network panel in Chrome]
      <header><h2>Demo</h2></header>
      <footer class="notes">
        [show Egg Timer counting down time left in presentation]
        [reload Egg Timer, show it retaining state]
        [kill network connection, reload Egg Timer, show it running]
        [close Egg Timer, restart browser, reopen Egg Timer, show it running]
        </footer>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="caveats" class="slide"><div>
    <section>
      <header><h2>Caveats</h2></header>
      <ol>
        <li>you need TLS:
        ["sw create the opportunity for a bad actor to turn a bad day into a bad eternity"]
        [letsencrypt.org?]</li>
        <li>that makes it troublesome to use a custom domain
        [suggest that github could make this much easier]</li>
        <li>work is in progress, it's early days</li>
        <li>Oghliner is immature, pre-1.0, breaking changes</li>
        <li>importance of CORS headers in the services you use</li>
        <li>Service Workers can do more than offlining [like push]; stay tuned</li>
      </ol>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="can-i-use" class="slide shout"><div>
    <section>
      <header><h2>Can I use?</h2></header>
      [show diagram of status of support]
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="by-the-way" class="slide shout"><div>
    <section>
      <header><h2>By the way…</h2></header>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="questions" class="slide shout"><div>
    <section>
      <header><h2>Questions?</h2></header>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="shout" class="slide shout"><div>
    <section>
      <header><h2>Thank You</h2></header>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div class="progress"><div></div></div>

  <script src="scripts/offline-manager.js"></script>
  <script src="scripts/script.js"></script>
</body>
</html>
