<!DOCTYPE html>
<html lang="en-US" class="fade">
<head>
  <meta charset="UTF-8">
  <title>Offline Web Apps On GitHub Pages</title>
  <meta name="viewport" content="width=device-width, user-scalable=yes">
  <link rel="stylesheet" href="themes/mozilla/styles/style.css">
</head>
<body class="list">
  <header class="caption">
    <h1>Offline Web Apps On GitHub Pages</h1>
    <p class="footer">
      Myk Melez, <a href="mailto:myk@mykzilla.org">myk@mykzilla.org</a>
    </p>
  </header>

  <aside class="talkdescription">
    <p>
      This slide deck is using the shower system - roll over the previews to see
      the notes and click any slide to go into presentation mode. Then use keys
      to navigate. <button onclick="goFullScreen()">Go fullscreen</button>
    </p>
    <p class="abstract">
      <strong>Abstract: </strong>
      GitHub Pages is a simple web host for static assets. And Offline Web Apps
      are designed to work well on devices without persistent network connections
      (and thus no hard dependencies on dynamic server-side logic).

      Which means GitHub Pages would be a great place to host Offline Web Apps,
      if there was a way for them to ensure they'll be cached despite not having
      control over the web server configuration. Service Workers provides
      that missing piece.

      Come see how Offline Web Apps hosted on GitHub Pages can use Service Workers
      to cache themselves consistently and persistently, including automatic,
      silent, and incremental updates, with graceful degradation on browsers
      that don't support them.

      You'll learn what Service Workers are, find out how to integrate them into
      Grunt and Gulp toolchains, and see demos of Offline Web Apps on GitHub Pages
      surviving page reloads and browser restarts on disconnected devices.
    </p>
  </aside>

  <div id="cover" class="slide cover"><div><section>
    <header><h2>Offline Web Apps On GitHub Pages</h2></header>
    <img src="pictures/offline.jpg" class="middle" height="400" alt="OFFLINE">
    <small class="credits"><a href="https://www.flickr.com/photos/mikecogh/5110795452/">Image by Michael Coghlan</a></small>
    <small class="byline">Myk Melez, GitHub Universe, 2015</small>
    <footer class="notes"></footer>
  </section></div></div>

  <div id="repurposed" class="slide cover"><div>
    <section>
      <header><h2>GitHub Pages</h2></header>
      <img src="pictures/legs-to-stand-on.jpg" alt="Legs to Stand On">
      <small class="credits"><a href="https://www.flickr.com/photos/orinrobertjohn/2966487924/">Image by Orin Zebest</a></small>
      <footer class="notes">
        GitHub Pages is a great, simple web host for static pages.
        Successful technologies often get repurposed for uses that were unintended by their original designers.
        What else can we do with it? Let's find out!
      </footer>
    </section>
  </div></div>

  <div id="definition" class="slide cover"><div>
    <section>
      <header><h2>Offline Web Apps</h2></header>
      <img src="pictures/solar-dehydrator.jpg" alt="Solar Dehydrator">
      <small class="credits"><a href="https://www.flickr.com/photos/fishermansdaughter/3908147560/">Image by fishermansdaughter</a></small>
      <footer class="notes">
        Offline Web Apps are apps that work when your network connection doesn't.
        Your browser loads them, and you can use them.
        Games, utilities, anything that isn't absolutely dependent on the network.
        Not just for airplane mode, but also on lie-fi (i.e. wi-fi that doesn't work very well).
      </footer>
    </section>
  </div></div>

  <div id="broken" class="slide cover h"><div>
    <section>
      <img src="pictures/broken.png">
      <footer class="notes">
        Browsers have had caches forever, but going offline usually means losing your ability to access the web.
        Even if a web app's assets are in the browser's cache, it needs the network connection to load them.
        Without a network connection, the web is usually broken.
      </footer>
    </section>
  </div></div>

  <div id="just-work" class="slide cover h"><div>
    <section>
      <img src="pictures/native-timer.png">
      <footer class="notes">
        By contrast, native apps "just work."
        How do we make web apps "just work?"
      </footer>
    </section>
  </div></div>

  <div id="app-cache" class="slide"><div>
    <section>
    <header><h2>Application Cache</h2></header>
      <blockquote>
        <p>Application Cache is a douchebag.</p>
        <p class="byline"><a href="http://alistapart.com/article/application-cache-is-a-douchebag">Jake Archibald</a></p>
      </blockquote>
      <footer class="notes">
        For the last few years, the only answer has been Application Cache.

        It's a declarative Web API for specifying the assets of an app in a manifest file.
        Browsers cache the declared assets and then use them when loading the app while offline.
        But AppCache has a variety of issues. It doesn't support popular use cases,
        it's full of footguns, and it just generally doesn't do what web developers want or expect.

        So Web Platform Developers started over.
      </footer>
    </section>
  </div></div>

  <div id="service-workers" class="slide cover"><div>
    <section>
    <header><h2>Service Workers To The Rescue!</h2></header>
    <img src="pictures/air-rescue.jpg" class="middle" alt="Air Rescue">
    <small class="credits"><a href="https://www.flickr.com/photos/timecaptured/8222176156/">Image by Karsten Seiferlin</a></small>
      <footer class="notes">
        Service Workers are the anti-AppCache.
        Whereas AppCache was declarative, Service Workers are declarative.
        Whereas AppCache tried to solve a very specific problem,
        Service Workers is a generic solution for a variety of problems.
        Among them, however, and front-of-mind to the Web Platform Developers
        who worked on the spec, was the Offline Web App use case.
      </footer>
    </section>
  </div></div>

  <div id="powerful-abstraction" class="slide w"><div>
    <section>
    <header><h2>A Powerful Abstraction</h2></header>
      <img src="pictures/service-worker.svg">
      <footer class="notes">
      Service Workers are a powerful abstraction.
      A Service Worker is something akin to a server process running on a client (i.e. a user's machine).
      It can intercept requests and serve them from its own local cache.
      It also has a lifecycle, with well-specified procedures for updates.
      </footer>
    </section>
  </div></div>

  <div id="oghliner" class="slide shout"><div>
    <section>
      <header><h2>Oghliner</h2></header>
      <footer class="notes">
        At Mozilla we recently started work on an experimental Node module called Oghliner.
        Oghliner is designed to streamline the process of deploying Offline Web Apps on GitHub Pages.
        Yes, it's pronounced Oghliner, like trough, Gough Street, and ghoti!
        It provides a template for an offline web app, so you can bootstrap a new app.
        It also provides tools to offline and deploy an existing app on GitHub Pages.
        Those tools can be used via a command line or integrated into a build system like Gulp and Grunt.
        Finally, it automates the process of configuring Travis CI to auto-deploy to GitHub Pages.
      </footer>
    </section>
  </div></div>

  <div id="offline" class="slide"><div>
    <section>
      <header><h2>Offlining</h2></header>
      <pre>> oghliner offline dist/</pre>
      <pre>
        <code>gulp.task('offline', function(callback) {</code>
        <code>  oghliner.offline({</code>
        <code>    rootDir: 'dist/',</code>
        <code>    fileGlobs: ['*.html', 'css/*.css', 'js/*.js',</code>
        <code>                'images/*'],</code>
        <code>  }, callback);</code>
        <code>});</code>
      </pre>
      <footer class="notes">
        * creates offline-worker.js script in root directory
        * also need to copy offline-manager.js and load it in HTML pages
      </footer>
    </section>
  </div></div>

  <div id="offline-result" class="slide"><div>
    <section>
      <header><h2>Offlining</h2></header>
      > oghliner offline dist/<br>
      <br>
      [11:12:29] Caching static resource "dist/css/index.css" (378 B)<br>
      [11:12:29] Caching static resource "dist/index.html" (3.04 kB)<br>
      [11:12:29] Caching static resource "dist/js/index.js" (8.43 kB)<br>
      [11:12:29] Caching static resource "dist/js/offline-manager.js" (176 B)<br>
      …<br>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="deploy" class="slide"><div>
    <section>
      <header><h2>Deploying</h2></header>
      <pre>> oghliner deploy dist/</pre>
      <pre>
        <code>gulp.task('deploy', function(callback) {</code>
        <code>  oghliner.deploy({</code>
        <code>    rootDir: 'dist',</code>
        <code>  }, callback);</code>
        <code>});</code>
      </pre>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="deploy-result" class="slide"><div>
    <section>
        > oghliner deploy dist/<br>
        <br>
        [11:17:43] Cloning git@github.com:mykmelez/eggtimer.git into ../../../../usr/local/lib/node_modules/oghliner/node_modules/gh-pages/.cache<br>
        [11:17:44] Cleaning<br>
        [11:17:44] Fetching origin<br>
        [11:17:46] Checking out origin/gh-pages<br>
        [11:17:46] Removing files<br>
        [11:17:46] Copying files<br>
        [11:17:46] Adding all<br>
        [11:17:46] Committing<br>
        [11:17:46] Pushing<br>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="configure" class="slide"><div>
    <section>
    <header><h2>Configuring</h2></header>
      <pre>> oghliner configure</pre>
      [explain how this is automation of build+offline+deploy]
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="configure-result" class="slide"><div>
    <section>
        [replace with diagram explaining process]
        [show screenshot of build output of Travis]
        > oghliner configure<br>
        <br>
        Creating temporary GitHub token for getting Travis token…<br>
        Getting Travis token…<br>
        Deleting temporary GitHub token for getting Travis token…<br>
        Checking the status of your repository in Travis…<br>
        Good news, your repository is already active in Travis!<br>
        Encrypting GitHub token…<br>
        Writing encrypted GitHub token to .travis.yml file…<br>
        <br>
        You're ready to auto-deploy using Travis!  Just commit the changes<br>
        in .travis.yml and push the commit to the origin/master branch:<br>
      </pre>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="demo" class="slide shout"><div>
    <section>
      [show Network panel in Chrome]
      <header><h2>Demo</h2></header>
      <footer class="notes">
        [show Egg Timer counting down time left in presentation]
        [reload Egg Timer, show it retaining state]
        [kill network connection, reload Egg Timer, show it running]
        [close Egg Timer, restart browser, reopen Egg Timer, show it running]
        </footer>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="caveats" class="slide"><div>
    <section>
      <header><h2>Caveats</h2></header>
      <ol>
        <li>
          <a href="http://caniuse.com/#feat=serviceworkers">Can I use Service Workers?</a>
          <a href="https://jakearchibald.github.io/isserviceworkerready/">Is ServiceWorker ready?</a>
        </li>
        <li>https: required; (<a href="https://letsencrypt.org/">Let's Encrypt!</a>)</li>
        <li>It's early days everywhere; the work is in progress.</li>
        <li>Support for non-CORS requests is limited.</li>
        <li>Stay tuned, offline is just the beginning!</li>
      </ol>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="by-the-way" class="slide shout"><div>
    <section>
      <header><h2>By the way…</h2></header>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="questions" class="slide shout"><div>
    <section>
      <header><h2>Questions?</h2></header>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="shout" class="slide shout"><div>
    <section>
      <header><h2>Thank You</h2></header>
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div class="progress"><div></div></div>

  <script src="scripts/offline-manager.js"></script>
  <script src="scripts/script.js"></script>
</body>
</html>
